<!DOCTYPE html>
<html>
<head>
    <title>Review Tool Debug</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #222;
            color: #0f0;
        }
        .error { color: #f00; }
        .success { color: #0f0; }
        .info { color: #ff0; }
    </style>
</head>
<body>
    <h1>Review Tool Debug Console</h1>
    <div id="log"></div>

    <script>
        // Debug logging
        const log = (msg, type = 'info') => {
            const logDiv = document.getElementById('log');
            logDiv.innerHTML += `<div class="${type}">${new Date().toLocaleTimeString()}: ${msg}</div>`;
            console.log(msg);
        };

        // Initialize languageData
        window.languageData = {};
        log('Initialized window.languageData');
    </script>

    <!-- Load all language data files -->
    <script src="../assets/js/language-data/afrikaans-data.js"></script>
    <script src="../assets/js/language-data/arabic-data.js"></script>
    <script src="../assets/js/language-data/bengali-data.js"></script>
    <script src="../assets/js/language-data/bulgarian-data.js"></script>
    <script src="../assets/js/language-data/burmese-data.js"></script>
    <script src="../assets/js/language-data/cebuano-data.js"></script>
    <script src="../assets/js/language-data/chinese-data.js"></script>
    <script src="../assets/js/language-data/cree-data.js"></script>
    <script src="../assets/js/language-data/croatian-data.js"></script>
    <script src="../assets/js/language-data/czech-data.js"></script>
    <script src="../assets/js/language-data/danish-data.js"></script>
    <script src="../assets/js/language-data/dari-data.js"></script>
    <script src="../assets/js/language-data/dutch-data.js"></script>
    <script src="../assets/js/language-data/estonian-data.js"></script>
    <script src="../assets/js/language-data/finnish-data.js"></script>
    <script src="../assets/js/language-data/flemish-data.js"></script>
    <script src="../assets/js/language-data/french-data.js"></script>
    <script src="../assets/js/language-data/german-data.js"></script>
    <script src="../assets/js/language-data/greek-data.js"></script>
    <script src="../assets/js/language-data/guarani-data.js"></script>
    <script src="../assets/js/language-data/gujarati-data.js"></script>
    <script src="../assets/js/language-data/hausa-data.js"></script>
    <script src="../assets/js/language-data/hebrew-data.js"></script>
    <script src="../assets/js/language-data/hindi-data.js"></script>
    <script src="../assets/js/language-data/hmong-data.js"></script>
    <script src="../assets/js/language-data/hungarian-data.js"></script>
    <script src="../assets/js/language-data/indonesian-data.js"></script>
    <script src="../assets/js/language-data/inuktitut-data.js"></script>
    <script src="../assets/js/language-data/irish-data.js"></script>
    <script src="../assets/js/language-data/italian-data.js"></script>
    <script src="../assets/js/language-data/japanese-data.js"></script>
    <script src="../assets/js/language-data/kannada-data.js"></script>
    <script src="../assets/js/language-data/kazakh-data.js"></script>
    <script src="../assets/js/language-data/korean-data.js"></script>
    <script src="../assets/js/language-data/lao-data.js"></script>
    <script src="../assets/js/language-data/latvian-data.js"></script>
    <script src="../assets/js/language-data/lithuanian-data.js"></script>
    <script src="../assets/js/language-data/malay-data.js"></script>
    <script src="../assets/js/language-data/marathi-data.js"></script>
    <script src="../assets/js/language-data/mongolian-data.js"></script>
    <script src="../assets/js/language-data/nahuatl-data.js"></script>
    <script src="../assets/js/language-data/navajo-data.js"></script>
    <script src="../assets/js/language-data/nepali-data.js"></script>
    <script src="../assets/js/language-data/pashto-data.js"></script>
    <script src="../assets/js/language-data/persian-data.js"></script>
    <script src="../assets/js/language-data/polish-data.js"></script>
    <script src="../assets/js/language-data/portuguese-data.js"></script>
    <script src="../assets/js/language-data/punjabi-data.js"></script>
    <script src="../assets/js/language-data/quechua-data.js"></script>
    <script src="../assets/js/language-data/romanian-data.js"></script>
    <script src="../assets/js/language-data/russian-data.js"></script>
    <script src="../assets/js/language-data/serbian-data.js"></script>
    <script src="../assets/js/language-data/slovak-data.js"></script>
    <script src="../assets/js/language-data/spanish-data.js"></script>
    <script src="../assets/js/language-data/swahili-data.js"></script>
    <script src="../assets/js/language-data/swedish-data.js"></script>
    <script src="../assets/js/language-data/tagalog-data.js"></script>
    <script src="../assets/js/language-data/tamil-data.js"></script>
    <script src="../assets/js/language-data/telugu-data.js"></script>
    <script src="../assets/js/language-data/thai-data.js"></script>
    <script src="../assets/js/language-data/ukrainian-data.js"></script>
    <script src="../assets/js/language-data/urdu-data.js"></script>
    <script src="../assets/js/language-data/vietnamese-data.js"></script>
    <script src="../assets/js/language-data/welsh-data.js"></script>
    <script src="../assets/js/language-data/wolof-data.js"></script>
    <script src="../assets/js/language-data/yoruba-data.js"></script>

    <script>
        // Wait for all scripts to load
        window.addEventListener('DOMContentLoaded', () => {
            log('=== DOM Content Loaded ===', 'success');

            // Check languageData
            try {
                const langCount = Object.keys(window.languageData).length;
                log(`Languages loaded: ${langCount}`, langCount > 0 ? 'success' : 'error');

                // List first 5 languages
                Object.keys(window.languageData).slice(0, 5).forEach(key => {
                    const lang = window.languageData[key];
                    log(`- ${key}: ${lang.name} ${lang.flag}`, 'info');
                });

                // Count resources
                let totalResources = 0;
                const resourcesByType = { courses: 0, apps: 0, books: 0, audio: 0, practice: 0 };

                Object.keys(window.languageData).forEach(langKey => {
                    const lang = window.languageData[langKey];
                    if (!lang) {
                        log(`WARNING: No data for language key: ${langKey}`, 'error');
                        return;
                    }

                    ['courses', 'apps', 'books', 'audio', 'practice'].forEach(type => {
                        const resources = lang.resources?.[type] || lang[type];
                        if (!resources) return;

                        if (!Array.isArray(resources)) {
                            log(`WARNING: ${langKey}.${type} is not an array`, 'error');
                            return;
                        }

                        resources.forEach(item => {
                            if (item.items && Array.isArray(item.items)) {
                                totalResources += item.items.length;
                                resourcesByType[type] += item.items.length;
                            } else if (item.name) {
                                totalResources++;
                                resourcesByType[type]++;
                            }
                        });
                    });
                });

                log(`=== Resource Count ===`, 'success');
                log(`Total resources: ${totalResources}`, totalResources > 0 ? 'success' : 'error');
                Object.entries(resourcesByType).forEach(([type, count]) => {
                    log(`${type}: ${count}`, 'info');
                });

                // Test resource loading logic (same as review tool)
                log(`=== Testing Review Tool Logic ===`, 'success');

                const testResources = [];
                Object.keys(window.languageData).slice(0, 3).forEach(langKey => {
                    const lang = window.languageData[langKey];
                    if (!lang) return;

                    ['courses', 'apps'].forEach(type => {
                        const resources = lang.resources?.[type] || lang[type];
                        if (!resources || !Array.isArray(resources)) return;

                        resources.forEach(item => {
                            if (item.items && Array.isArray(item.items)) {
                                item.items.forEach(resource => {
                                    testResources.push({
                                        ...resource,
                                        _id: `${langKey}_${type}_${resource.name}`,
                                        _type: type,
                                        _category: item.category,
                                        _language: langKey,
                                        _langName: lang.name,
                                        _langFlag: lang.flag
                                    });
                                });
                            } else if (item.name) {
                                testResources.push({
                                    ...item,
                                    _id: `${langKey}_${type}_${item.name}`,
                                    _type: type,
                                    _language: langKey,
                                    _langName: lang.name,
                                    _langFlag: lang.flag
                                });
                            }
                        });
                    });
                });

                log(`Test resources loaded: ${testResources.length}`, 'success');

                // Show first resource
                if (testResources.length > 0) {
                    const first = testResources[0];
                    log(`=== First Resource ===`, 'success');
                    log(`Name: ${first.name}`, 'info');
                    log(`URL: ${first.url}`, 'info');
                    log(`Language: ${first._langFlag} ${first._langName}`, 'info');
                    log(`Type: ${first._type}`, 'info');
                }

            } catch (error) {
                log(`ERROR: ${error.message}`, 'error');
                console.error(error);
            }
        });
    </script>
</body>
</html>