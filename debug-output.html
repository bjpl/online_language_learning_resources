<!DOCTYPE html>
<html>
<head>
    <title>Debug Test</title>
</head>
<body>
    <h1>Portuguese Practice Resources Debug</h1>
    <div id="output"></div>

    <script src="assets/js/data-simple.js"></script>
    <script src="assets/js/portuguese-data.js"></script>
    <script>
        const output = document.getElementById('output');

        // Check Portuguese data
        console.log('Portuguese data:', portugueseResources);

        // Check practice section
        if (portugueseResources && portugueseResources.resources && portugueseResources.resources.practice) {
            output.innerHTML += '<h2>Practice Categories:</h2>';

            portugueseResources.resources.practice.forEach((category, catIndex) => {
                output.innerHTML += `<h3>Category ${catIndex}: ${category ? category.category : 'UNDEFINED CATEGORY'}</h3>`;

                if (category && category.items) {
                    output.innerHTML += `<p>Items count: ${category.items.length}</p>`;
                    category.items.forEach((item, itemIndex) => {
                        if (!item || !item.name) {
                            output.innerHTML += `<p style="color:red">Item ${itemIndex}: UNDEFINED or MISSING NAME</p>`;
                            console.error('Undefined item at:', catIndex, itemIndex, item);
                        } else {
                            output.innerHTML += `<p style="color:green">Item ${itemIndex}: ${item.name}</p>`;
                        }
                    });
                } else {
                    output.innerHTML += '<p style="color:red">NO ITEMS or UNDEFINED ITEMS</p>';
                }
            });
        } else {
            output.innerHTML += '<h2 style="color:red">NO PRACTICE SECTION FOUND</h2>';
        }

        // Also check if languageData exists
        output.innerHTML += '<h2>Language Data Check:</h2>';
        if (typeof languageData !== 'undefined' && languageData.portuguese) {
            output.innerHTML += '<p style="color:green">Portuguese in languageData: YES</p>';

            // Check if practice resources are properly merged
            if (languageData.portuguese.resources && languageData.portuguese.resources.practice) {
                output.innerHTML += '<p style="color:green">Practice in merged data: YES</p>';
                output.innerHTML += `<p>Practice items in merged: ${JSON.stringify(languageData.portuguese.resources.practice)}</p>`;
            } else {
                output.innerHTML += '<p style="color:red">Practice in merged data: NO</p>';
            }
        } else {
            output.innerHTML += '<p style="color:red">Portuguese in languageData: NO</p>';
        }
    </script>
</body>
</html>