<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Language Test - All 65 Languages</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #6b46c1;
            padding-bottom: 10px;
        }
        .summary {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-value {
            font-size: 36px;
            font-weight: bold;
            margin: 5px 0;
        }
        .stat-label {
            font-size: 14px;
            opacity: 0.9;
        }
        .language-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .language {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }
        .language:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        .has-apps {
            border-left: 4px solid #4caf50;
        }
        .no-apps {
            border-left: 4px solid #ff9800;
        }
        .missing {
            border-left: 4px solid #f44336;
            background: #ffebee;
        }
        .lang-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .lang-flag {
            font-size: 24px;
            margin-right: 10px;
        }
        .lang-name {
            font-weight: bold;
            font-size: 18px;
            color: #333;
        }
        .lang-stats {
            color: #666;
            font-size: 14px;
            margin-top: 5px;
        }
        .apps-info {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }
        .app-count {
            display: inline-block;
            background: #6b46c1;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }
        .valid { color: #4caf50; }
        .empty { color: #ff9800; }
        .error { color: #f44336; font-weight: bold; }

        .debug-section {
            background: #263238;
            color: #aed581;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 12px;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>üåç Complete Language Learning Hub Test</h1>

    <div class="summary" id="summary">
        <h2>Loading Language Data...</h2>
        <div class="stats" id="stats"></div>
    </div>

    <h2>All Languages</h2>
    <div class="language-grid" id="results"></div>

    <div class="debug-section" id="debug">
        <strong>Debug Output:</strong>
        <div id="debug-content"></div>
    </div>

    <!-- Load the main language data first -->
    <script src="assets/js/language-data.js"></script>

    <!-- Load all 65 language data files in alphabetical order -->
    <script src="assets/js/afrikaans-data.js"></script>
    <script src="assets/js/arabic-data.js"></script>
    <script src="assets/js/bengali-data.js"></script>
    <script src="assets/js/bulgarian-data.js"></script>
    <script src="assets/js/burmese-data.js"></script>
    <script src="assets/js/cebuano-data.js"></script>
    <script src="assets/js/chinese-data.js"></script>
    <script src="assets/js/cree-data.js"></script>
    <script src="assets/js/croatian-data.js"></script>
    <script src="assets/js/danish-data.js"></script>
    <script src="assets/js/dari-data.js"></script>
    <script src="assets/js/dutch-data.js"></script>
    <script src="assets/js/estonian-data.js"></script>
    <script src="assets/js/finnish-data.js"></script>
    <script src="assets/js/flemish-data.js"></script>
    <script src="assets/js/french-data.js"></script>
    <script src="assets/js/german-data.js"></script>
    <script src="assets/js/greek-data.js"></script>
    <script src="assets/js/guarani-data.js"></script>
    <script src="assets/js/gujarati-data.js"></script>
    <script src="assets/js/hausa-data.js"></script>
    <script src="assets/js/hindi-data.js"></script>
    <script src="assets/js/hmong-data.js"></script>
    <script src="assets/js/hungarian-data.js"></script>
    <script src="assets/js/indonesian-data.js"></script>
    <script src="assets/js/inuktitut-data.js"></script>
    <script src="assets/js/irish-data.js"></script>
    <script src="assets/js/italian-data.js"></script>
    <script src="assets/js/japanese-data.js"></script>
    <script src="assets/js/kannada-data.js"></script>
    <script src="assets/js/kazakh-data.js"></script>
    <script src="assets/js/korean-data.js"></script>
    <script src="assets/js/lao-data.js"></script>
    <script src="assets/js/latvian-data.js"></script>
    <script src="assets/js/lithuanian-data.js"></script>
    <script src="assets/js/malay-data.js"></script>
    <script src="assets/js/marathi-data.js"></script>
    <script src="assets/js/mongolian-data.js"></script>
    <script src="assets/js/nahuatl-data.js"></script>
    <script src="assets/js/navajo-data.js"></script>
    <script src="assets/js/nepali-data.js"></script>
    <script src="assets/js/pashto-data.js"></script>
    <script src="assets/js/persian-data.js"></script>
    <script src="assets/js/polish-data.js"></script>
    <script src="assets/js/portuguese-data.js"></script>
    <script src="assets/js/punjabi-data.js"></script>
    <script src="assets/js/quechua-data.js"></script>
    <script src="assets/js/romanian-data.js"></script>
    <script src="assets/js/russian-data.js"></script>
    <script src="assets/js/serbian-data.js"></script>
    <script src="assets/js/sign-language-data.js"></script>
    <script src="assets/js/slovak-data.js"></script>
    <script src="assets/js/spanish-data.js"></script>
    <script src="assets/js/swahili-data.js"></script>
    <script src="assets/js/swedish-data.js"></script>
    <script src="assets/js/tagalog-data.js"></script>
    <script src="assets/js/tamil-data.js"></script>
    <script src="assets/js/telugu-data.js"></script>
    <script src="assets/js/thai-data.js"></script>
    <script src="assets/js/ukrainian-data.js"></script>
    <script src="assets/js/urdu-data.js"></script>
    <script src="assets/js/vietnamese-data.js"></script>
    <script src="assets/js/welsh-data.js"></script>
    <script src="assets/js/wolof-data.js"></script>
    <script src="assets/js/yoruba-data.js"></script>

    <script>
        // CONCEPT: Comprehensive language testing with detailed debugging
        // WHY: Need to understand exactly what's happening with all 65 languages

        console.log('Starting language test...');
        const debugLog = [];

        // Debug: Check if languageData exists
        if (typeof languageData === 'undefined') {
            debugLog.push('ERROR: languageData is undefined!');
            document.getElementById('debug-content').textContent = debugLog.join('\n');
        } else {
            debugLog.push(`‚úì languageData exists`);
            debugLog.push(`‚úì Type: ${typeof languageData}`);

            // Get all language keys
            const allKeys = Object.keys(languageData);
            debugLog.push(`\n=== ALL KEYS IN LANGUAGEDATA ===`);
            debugLog.push(`Total keys: ${allKeys.length}`);
            debugLog.push(`Keys: ${allKeys.join(', ')}`);

            // Filter to only actual language entries
            const languageEntries = Object.entries(languageData).filter(([key, value]) =>
                value && typeof value === 'object' && value.name
            );

            debugLog.push(`\n=== VALID LANGUAGE ENTRIES ===`);
            debugLog.push(`Valid languages: ${languageEntries.length}`);

            // Statistics
            let validCount = 0;
            let emptyCount = 0;
            let problemCount = 0;
            let totalAppCount = 0;

            const results = document.getElementById('results');
            let html = '';

            // Process each language
            languageEntries.sort((a, b) => a[1].name.localeCompare(b[1].name)).forEach(([key, language]) => {
                const appsData = language.resources?.apps || language.apps;
                let status = '';
                let statusClass = '';
                let appCount = 0;

                if (!appsData) {
                    status = 'No apps property';
                    statusClass = 'missing';
                    problemCount++;
                } else if (!Array.isArray(appsData)) {
                    status = 'Apps not an array';
                    statusClass = 'missing';
                    problemCount++;
                } else if (appsData.length === 0) {
                    status = 'Empty apps array';
                    statusClass = 'no-apps';
                    emptyCount++;
                } else {
                    // Count actual apps
                    appsData.forEach(category => {
                        if (category.items && Array.isArray(category.items)) {
                            appCount += category.items.length;
                        } else if (category.name) {
                            appCount += 1;
                        }
                    });

                    if (appCount > 0) {
                        status = `${appCount} apps`;
                        statusClass = 'has-apps';
                        validCount++;
                        totalAppCount += appCount;
                    } else {
                        status = 'Structure issue';
                        statusClass = 'no-apps';
                        problemCount++;
                    }
                }

                html += `
                    <div class="language ${statusClass}">
                        <div class="lang-header">
                            <span class="lang-flag">${language.flag || 'üåê'}</span>
                            <div>
                                <div class="lang-name">${language.name}</div>
                                <div class="lang-stats">${language.speakers || 'Unknown speakers'}</div>
                            </div>
                        </div>
                        <div class="apps-info">
                            <span class="app-count ${appCount > 0 ? 'valid' : 'empty'}">${status}</span>
                        </div>
                    </div>
                `;
            });

            results.innerHTML = html;

            // Update summary
            const statsHtml = `
                <div class="stat-card">
                    <div class="stat-value">${languageEntries.length}</div>
                    <div class="stat-label">Total Languages</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #4caf50, #8bc34a);">
                    <div class="stat-value">${validCount}</div>
                    <div class="stat-label">With Apps</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #ff9800, #ffc107);">
                    <div class="stat-value">${emptyCount}</div>
                    <div class="stat-label">Empty Apps</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #f44336, #e91e63);">
                    <div class="stat-value">${problemCount}</div>
                    <div class="stat-label">Problems</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #2196f3, #03a9f4);">
                    <div class="stat-value">${totalAppCount}</div>
                    <div class="stat-label">Total Apps</div>
                </div>
            `;

            document.getElementById('stats').innerHTML = statsHtml;
            document.querySelector('#summary h2').textContent = 'üìä Summary Statistics';

            // Final debug info
            debugLog.push(`\n=== FINAL STATISTICS ===`);
            debugLog.push(`Total languages loaded: ${languageEntries.length}`);
            debugLog.push(`Languages with apps: ${validCount}`);
            debugLog.push(`Languages with empty apps: ${emptyCount}`);
            debugLog.push(`Languages with problems: ${problemCount}`);
            debugLog.push(`Total app resources: ${totalAppCount}`);

            // Check for missing expected languages
            const expectedLanguages = [
                'afrikaans', 'arabic', 'bengali', 'bulgarian', 'burmese',
                'cebuano', 'chinese', 'cree', 'croatian', 'czech',
                'danish', 'dari', 'dutch', 'estonian', 'finnish',
                'flemish', 'french', 'german', 'greek', 'guarani',
                'gujarati', 'hausa', 'hebrew', 'hindi', 'hmong',
                'hungarian', 'indonesian', 'inuktitut', 'irish', 'italian',
                'japanese', 'kannada', 'kazakh', 'korean', 'lao',
                'latvian', 'lithuanian', 'malay', 'marathi', 'mongolian',
                'nahuatl', 'navajo', 'nepali', 'norwegian', 'pashto',
                'persian', 'polish', 'portuguese', 'punjabi', 'quechua',
                'romanian', 'russian', 'serbian', 'signlanguage', 'slovak',
                'spanish', 'swahili', 'swedish', 'tagalog', 'tamil',
                'telugu', 'thai', 'turkish', 'ukrainian', 'urdu',
                'vietnamese', 'welsh', 'wolof', 'yoruba'
            ];

            const loadedKeys = languageEntries.map(([key]) => key);
            const missing = expectedLanguages.filter(lang => !loadedKeys.includes(lang));

            if (missing.length > 0) {
                debugLog.push(`\n=== MISSING LANGUAGES ===`);
                debugLog.push(`Expected 65, got ${loadedKeys.length}`);
                debugLog.push(`Missing: ${missing.join(', ')}`);
            }

            document.getElementById('debug-content').textContent = debugLog.join('\n');
        }

        // Log to console for debugging
        console.log('Test complete. Check page for results.');
    </script>
</body>
</html>